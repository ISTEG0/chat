let e,t,n,o,i;function r(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},l={},c=a.parcelRequiref756;null==c&&((c=function(e){if(e in s)return s[e].exports;if(e in l){var t=l[e];delete l[e];var n={id:e,exports:{}};return s[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){l[e]=t},a.parcelRequiref756=c);var u={};u=new URL(c("27Lyk").resolve("dgJAf"),import.meta.url).toString();var d={};d=new URL(c("27Lyk").resolve("1VPNH"),import.meta.url).toString();var m={};m=new URL(c("27Lyk").resolve("dACyE"),import.meta.url).toString();var f={};f=new URL(c("27Lyk").resolve("2Iap4"),import.meta.url).toString();var h={};h=new URL(c("27Lyk").resolve("25Ney"),import.meta.url).toString();var g={};g=new URL(c("27Lyk").resolve("jv32c"),import.meta.url).toString();const p={chat:document.querySelector(".chat"),dialogWindow:document.querySelector(".chat-dialog"),enterFieldChat:document.querySelector(".chat-form__inp"),btnSend:document.querySelector(".btn-send"),form:document.querySelector(".chat-form"),btnSettings:document.querySelector(".btn-settings"),btnSignOut:document.querySelector(".btn-exit"),preload:document.querySelector(".preload-wrapper"),nickname:document.querySelector(".nickname"),btnEmoji:document.querySelector(".btn-emoji"),emojiContainer:document.querySelector(".emoji"),emoji:document.querySelector("emoji-picker")},b={modal:document.querySelector("#modal-js"),btnModalClose:document.querySelector(".modal__btn-close"),btnGiveCode:document.querySelector(".btn-give-code"),btnEnterCode:document.querySelector(".btn-enter-code"),btnSingIn:document.querySelector(".btn-sing-in"),enterFieldModal:document.querySelector(".modal-input"),titleModal:document.querySelector(".modal__title-text"),titleInputModal:document.querySelector(".modal-form__title"),btnRename:document.querySelector(".btn-rename"),btnBack:document.querySelector(".btn-back"),notification:document.querySelector(".notification"),notificationText:document.querySelector(".notification__text"),notificationName:document.querySelector(".notification__text-name")},v={authorization:{title:"Авторизация",inputTitle:"Почта:",placeholder:"Введите почту...",notificationOk:"Код успешно отправлен вам на почту!",notificationError:"Произошла ошибка, повторите снова или попозже"},confirmation:{title:"Подтверждение",inputTitle:"Код:",placeholder:"Введите код...",notificationError:"Произошла ошибка, повторите снова или попозже",notificationIncorrectCode:"Не верный код авторизации"},settings:{title:"Настройки",inputTitle:"Имя в чате:",placeholder:"Введите имя...",notificationOk:"Имя успешно изменено на ",notificationError:"Произошла ошибка, повторите снова или попозже"}},y={srcBtnDisabled:`url("${r(u)}")`,srcBtnActive:`url("${r(d)}")`,srcBtnRenameActive:`url("${r(m)}")`,srcBtnRenameDisabled:`url("${r(f)}")`,srcBtnEmojiActive:`url("${r(h)}")`,srcBtnEmojiDisabled:`url("${r(g)}")`},w={sendingMessage:"sent-message",inboxMessage:"in-message",hideBtn:"hide-btn",activeBtn:"active-btn",notificationOk:"show-notification-green",notificationError:"show-notification-red",showEmoji:"show-emoji"},k=document.querySelector("#template"),C=document.querySelector(".chat-form__textarea"),D={messageTimeTemplate:k.content.querySelector(".dialog-info__message-time"),messageTextTemlate:k.content.querySelector(".chat-dialog__message-text"),messageNicknameTemlate:k.content.querySelector(".dialog-info__message-nickname")};var E={};function j(e,t){r(E).set(e,t)}function x(e){return r(E).get(e)}function T(e){r(E).remove(e)}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function L(e){M(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===S(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}function $(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function _(e){M(1,arguments);var t=L(e),n=t.getUTCDay();return t.setUTCDate(t.getUTCDate()-((n<1?7:0)+n-1)),t.setUTCHours(0,0,0,0),t}function U(e){M(1,arguments);var t=L(e),n=t.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var i=_(o),r=new Date(0);r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0);var a=_(r);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}E=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}return function t(n,o){function i(t,i,r){if("undefined"!=typeof document){"number"==typeof(r=e({},o,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in r)r[s]&&(a+="; "+s,!0!==r[s]&&(a+="="+r[s].split(";")[0]));return document.cookie=t+"="+n.write(i,t)+a}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},i=0;i<t.length;i++){var r=t[i].split("="),a=r.slice(1).join("=");try{var s=decodeURIComponent(r[0]);if(o[s]=n.read(a,s),e===s)break}catch(e){}}return e?o[e]:o}},remove:function(t,n){i(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}();var z={};function P(e,t){M(1,arguments);var n,o,i,r,a,s,l,c,u=$(null!==(n=null!==(o=null!==(i=null!==(r=null==t?void 0:t.weekStartsOn)&&void 0!==r?r:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==i?i:z.weekStartsOn)&&void 0!==o?o:null===(l=z.locale)||void 0===l?void 0:null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=L(e),m=d.getUTCDay();return d.setUTCDate(d.getUTCDate()-((m<u?7:0)+m-u)),d.setUTCHours(0,0,0,0),d}function F(e,t){M(1,arguments);var n,o,i,r,a,s,l,c,u=L(e),d=u.getUTCFullYear(),m=$(null!==(n=null!==(o=null!==(i=null!==(r=null==t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:z.firstWeekContainsDate)&&void 0!==o?o:null===(l=z.locale)||void 0===l?void 0:null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1);if(!(m>=1&&m<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(d+1,0,m),f.setUTCHours(0,0,0,0);var h=P(f,t),g=new Date(0);g.setUTCFullYear(d,0,m),g.setUTCHours(0,0,0,0);var p=P(g,t);return u.getTime()>=h.getTime()?d+1:u.getTime()>=p.getTime()?d:d-1}function O(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n}var B={y:function(e,t){var n=e.getUTCFullYear(),o=n>0?n:1-n;return O("yy"===t?o%100:o,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):O(n+1,2)},d:function(e,t){return O(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return O(e.getUTCHours()%12||12,t.length)},H:function(e,t){return O(e.getUTCHours(),t.length)},m:function(e,t){return O(e.getUTCMinutes(),t.length)},s:function(e,t){return O(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length;return O(Math.floor(e.getUTCMilliseconds()*Math.pow(10,n-3)),t.length)}},W={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"};function N(e,t){var n=e>0?"-":"+",o=Math.abs(e),i=Math.floor(o/60),r=o%60;return 0===r?n+String(i):n+String(i)+(t||"")+O(r,2)}function q(e,t){return e%60==0?(e>0?"-":"+")+O(Math.abs(e)/60,2):A(e,t)}function A(e,t){var n=e>0?"-":"+",o=Math.abs(e);return n+O(Math.floor(o/60),2)+(t||"")+O(o%60,2)}var R={G:function(e,t,n){var o=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});default:return n.era(o,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var o=e.getUTCFullYear(),i=o>0?o:1-o;return n.ordinalNumber(i,{unit:"year"})}return B.y(e,t)},Y:function(e,t,n,o){var i=F(e,o),r=i>0?i:1-i;return"YY"===t?O(r%100,2):"Yo"===t?n.ordinalNumber(r,{unit:"year"}):O(r,t.length)},R:function(e,t){return O(U(e),t.length)},u:function(e,t){return O(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var o=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(o);case"QQ":return O(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(e,t,n){var o=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(o);case"qq":return O(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(e,t,n){var o=e.getUTCMonth();switch(t){case"M":case"MM":return B.M(e,t);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(e,t,n){var o=e.getUTCMonth();switch(t){case"L":return String(o+1);case"LL":return O(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(e,t,n,o){var i=function(e,t){M(1,arguments);var n=L(e);return Math.round((P(n,t).getTime()-(function(e,t){M(1,arguments);var n,o,i,r,a,s,l,c,u=$(null!==(n=null!==(o=null!==(i=null!==(r=null==t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==i?i:z.firstWeekContainsDate)&&void 0!==o?o:null===(l=z.locale)||void 0===l?void 0:null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==n?n:1),d=F(e,t),m=new Date(0);return m.setUTCFullYear(d,0,u),m.setUTCHours(0,0,0,0),P(m,t)})(n,t).getTime())/6048e5)+1}(e,o);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):O(i,t.length)},I:function(e,t,n){var o=function(e){M(1,arguments);var t=L(e);return Math.round((_(t).getTime()-(function(e){M(1,arguments);var t=U(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),_(n)})(t).getTime())/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(o,{unit:"week"}):O(o,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):B.d(e,t)},D:function(e,t,n){var o=function(e){M(1,arguments);var t=L(e),n=t.getTime();return t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),Math.floor((n-t.getTime())/864e5)+1}(e);return"Do"===t?n.ordinalNumber(o,{unit:"dayOfYear"}):O(o,t.length)},E:function(e,t,n){var o=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(e,t,n,o){var i=e.getUTCDay(),r=(i-o.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return O(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,o){var i=e.getUTCDay(),r=(i-o.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return O(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var o=e.getUTCDay(),i=0===o?7:o;switch(t){case"i":return String(i);case"ii":return O(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(e,t,n){var o=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){var o,i=e.getUTCHours();switch(o=12===i?W.noon:0===i?W.midnight:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){var o,i=e.getUTCHours();switch(o=i>=17?W.evening:i>=12?W.afternoon:i>=4?W.morning:W.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var o=e.getUTCHours()%12;return 0===o&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return B.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):B.H(e,t)},K:function(e,t,n){var o=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(o,{unit:"hour"}):O(o,t.length)},k:function(e,t,n){var o=e.getUTCHours();return(0===o&&(o=24),"ko"===t)?n.ordinalNumber(o,{unit:"hour"}):O(o,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):B.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):B.s(e,t)},S:function(e,t){return B.S(e,t)},X:function(e,t,n,o){var i=(o._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return q(i);case"XXXX":case"XX":return A(i);default:return A(i,":")}},x:function(e,t,n,o){var i=(o._originalDate||e).getTimezoneOffset();switch(t){case"x":return q(i);case"xxxx":case"xx":return A(i);default:return A(i,":")}},O:function(e,t,n,o){var i=(o._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+N(i,":");default:return"GMT"+A(i,":")}},z:function(e,t,n,o){var i=(o._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+N(i,":");default:return"GMT"+A(i,":")}},t:function(e,t,n,o){return O(Math.floor((o._originalDate||e).getTime()/1e3),t.length)},T:function(e,t,n,o){return O((o._originalDate||e).getTime(),t.length)}},I=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Y=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},H={p:Y,P:function(e,t){var n,o=e.match(/(P+)(p+)?/)||[],i=o[1],r=o[2];if(!r)return I(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",I(i,t)).replace("{{time}}",Y(r,t))}},G=["D","DD"],X=["YY","YYYY"];function Q(e,t,n){if("YYYY"===e)throw RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var V={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function J(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var K={date:J({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:J({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:J({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Z={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ee(e){return function(t,n){var o;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,r=null!=n&&n.width?String(n.width):i;o=e.formattingValues[r]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!=n&&n.width?String(n.width):e.defaultWidth;o=e.values[s]||e.values[a]}return o[e.argumentCallback?e.argumentCallback(t):t]}}function et(e){return function(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.width,r=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(r);if(!a)return null;var s=a[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(l,function(e){return e.test(s)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(l,function(e){return e.test(s)});return n=e.valueCallback?e.valueCallback(c):c,{value:n=o.valueCallback?o.valueCallback(n):n,rest:t.slice(s.length)}}}var en={code:"en-US",formatDistance:function(e,t,n){var o,i=V[e];return(o="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix)?n.comparison&&n.comparison>0?"in "+o:o+" ago":o},formatLong:K,formatRelative:function(e,t,n,o){return Z[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:ee({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ee({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ee({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ee({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ee({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.match(e.matchPattern);if(!o)return null;var i=o[0],r=t.match(e.parsePattern);if(!r)return null;var a=e.valueCallback?e.valueCallback(r[0]):r[0];return{value:a=n.valueCallback?n.valueCallback(a):a,rest:t.slice(i.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:et({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:et({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:et({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:et({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:et({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},eo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ei=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,er=/^'([^]*?)'?$/,ea=/''/g,es=/[a-zA-Z]/;function el(e,t){var n;let o=e.user.email===x("email")?"rigth":"left";D.messageTextTemlate.textContent=e.text,D.messageTimeTemplate.textContent=(n=e.createdAt,function(e,t,n){M(2,arguments);var o,i,r,a,s,l,c,u,d,m,f,h,g,p,b,v,y,w,k,C=String(t),D=null!==(i=null!==(r=null==n?void 0:n.locale)&&void 0!==r?r:z.locale)&&void 0!==i?i:en,E=$(null!==(a=null!==(s=null!==(l=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n?void 0:null===(u=n.locale)||void 0===u?void 0:null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:z.firstWeekContainsDate)&&void 0!==s?s:null===(m=z.locale)||void 0===m?void 0:null===(f=m.options)||void 0===f?void 0:f.firstWeekContainsDate)&&void 0!==a?a:1);if(!(E>=1&&E<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=$(null!==(h=null!==(g=null!==(p=null!==(b=null==n?void 0:n.weekStartsOn)&&void 0!==b?b:null==n?void 0:null===(v=n.locale)||void 0===v?void 0:null===(y=v.options)||void 0===y?void 0:y.weekStartsOn)&&void 0!==p?p:z.weekStartsOn)&&void 0!==g?g:null===(w=z.locale)||void 0===w?void 0:null===(k=w.options)||void 0===k?void 0:k.weekStartsOn)&&void 0!==h?h:0);if(!(j>=0&&j<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!D.localize)throw RangeError("locale must contain localize property");if(!D.formatLong)throw RangeError("locale must contain formatLong property");var x=L(e);if(!function(e){return M(1,arguments),(!!function(e){return M(1,arguments),e instanceof Date||"object"===S(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)||"number"==typeof e)&&!isNaN(Number(L(e)))}(x))throw RangeError("Invalid time value");var T=((o=new Date(Date.UTC(x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds()))).setUTCFullYear(x.getFullYear()),x.getTime()-o.getTime()),_=function(e,t){return M(2,arguments),function(e,t){M(2,arguments);var n=L(e).getTime(),o=$(t);return new Date(n+o)}(e,-$(t))}(x,T),U={firstWeekContainsDate:E,weekStartsOn:j,locale:D,_originalDate:x};return C.match(ei).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,H[t])(e,D.formatLong):e}).join("").match(eo).map(function(o){if("''"===o)return"'";var i,r=o[0];if("'"===r)return(i=o.match(er))?i[1].replace(ea,"'"):o;var a=R[r];if(a)return null!=n&&n.useAdditionalWeekYearTokens||-1===X.indexOf(o)||Q(o,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||-1===G.indexOf(o)||Q(o,t,String(e)),a(_,o,D.localize,U);if(r.match(es))throw RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return o}).join("")}(new Date(n),"HH:mm dd.LL.yy ")),D.messageNicknameTemlate.textContent=e.user.name;let i=k.content.cloneNode(!0),r=i.querySelector(".chat-dialog__message");r.classList.add("rigth"===o?w.sendingMessage:w.inboxMessage),"append"===t?p.dialogWindow.append(i):"prepend"===t&&p.dialogWindow.prepend(i)}function ec(e){p.preload.style.display=e}function eu(e){p.nickname.textContent=e}function ed(){p.dialogWindow.scrollTop=p.dialogWindow.scrollHeight}function em(e,t){"hide"===t&&e.classList.add(w.hideBtn),"show"===t&&e.classList.remove(w.hideBtn)}function ef(e,t){"active"===t?(e.classList.add(w.activeBtn),e.disabled=""):"disabled"===t&&(e.classList.remove(w.activeBtn),e.disabled="false")}function eh(e){"input"===e.tagName.toLowerCase()?e.value="":e.textContent=""}function eg(e){return"input"===e.tagName.toLowerCase()?e.value.trim():e.textContent.trim()}function ep(e){let t=eg(e);return""===t||!t&&void 0}function eb(e,t,n,o){ep(e)?(t.disabled=!0,t.style.backgroundImage=o):(t.disabled=!1,t.style.backgroundImage=n)}function ev(e="",t=""){b.notification.classList.remove(w.notificationOk),b.notification.classList.remove(w.notificationError),e===v.authorization.title&&"ok"===t?(b.notificationText.textContent=v.authorization.notificationOk,b.notification.classList.add(w.notificationOk)):e===v.authorization.title&&"error"===t&&(b.notificationText.textContent=v.authorization.notificationError,b.notification.classList.add(w.notificationError)),e===v.confirmation.title&&"errorCode"===t?(b.notificationText.textContent=v.confirmation.notificationIncorrectCode,b.notification.classList.add(w.notificationError)):e===v.confirmation.title&&"error"===t&&(b.notificationText.textContent=v.authorization.notificationError,b.notification.classList.add(w.notificationError)),e===v.settings.title&&"ok"===t?(b.notificationText.textContent=v.settings.notificationOk,b.notification.classList.add(w.notificationOk)):e===v.settings.title&&"error"===t&&(b.notificationText.textContent=v.settings.notificationError,b.notification.classList.add(w.notificationError))}function ey(e){return/[\u0400-\u04FF]/.test(e)}const ew="https://edu.strada.one",ek={urlToken:`${ew}/api/user`,urlDataProfile:`${ew}/api/user/me`,urlHistoryMessages:`${ew}/api/messages/`},eC={get:"GET",post:"POST",patch:"PATCH"};async function eD(e,t,n=null,o=null){try{ec("flex");let i=await fetch(e,{method:t,headers:{"Content-type":"application/json; charset=UTF-8",Authorization:null!==n?`Bearer ${x("token")}`:null},body:null!==o?JSON.stringify(o):null}),r=await i.json();if(200===i.status)return{status:"true",answer:r};return console.log("ошибка",r),console.log("response статус",i.status),{status:"false",answer:r}}catch(e){console.log(`Error: ошибка ${e.message}`)}finally{ec("none")}}function eE(e){(e.target===b.btnModalClose||e.target===b.modal)&&ex()}function ej(){b.modal.classList.add("show-modal")}function ex(){b.modal.classList.remove("show-modal")}function eT(e,t,n){b.titleModal.textContent=e,b.enterFieldModal.placeholder=n,b.titleInputModal.textContent=t}function eS(e){if("string"!=typeof e||!e)throw Error("expected a non-empty string, got: "+e)}function eM(e){if("number"!=typeof e)throw Error("expected a number, got: "+e)}const eL="emoji",e$="keyvalue",e_="favorites",eU="tokens",ez="count",eP="group-order",eF="eTag",eO="skinTone",eB="readonly",eW="readwrite",eN="skinUnicodes";function eq(e){return function(e,t){let n=new Set,o=[];for(let i of e){let e=t(i);n.has(e)||(n.add(e),o.push(i))}return o}(e,e=>e.unicode)}const eA={},eR={},eI={};function eY(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function eH(e){let t=await new Promise((t,n)=>{let o=indexedDB.open(e,1);eA[e]=o,o.onupgradeneeded=e=>{e.oldVersion<1&&function(e){function t(t,n,o){let i=n?e.createObjectStore(t,{keyPath:n}):e.createObjectStore(t);if(o)for(let[e,[t,n]]of Object.entries(o))i.createIndex(e,t,{multiEntry:n});return i}t(e$),t(eL,"unicode",{[eU]:["tokens",!0],[eP]:[["group","order"]],[eN]:["skinUnicodes",!0]}),t(e_,void 0,{[ez]:[""]})}(o.result)},eY(t,n,o)});return t.onclose=()=>eX(e),t}function eG(e,t,n,o){return new Promise((i,r)=>{let a;let s=e.transaction(t,n,{durability:"relaxed"}),l="string"==typeof t?s.objectStore(t):t.map(e=>s.objectStore(e));o(l,s,e=>{a=e}),s.oncomplete=()=>i(a),s.onerror=()=>r(s.error)})}function eX(e){let t=eA[e],n=t&&t.result;if(n){n.close();let t=eI[e];if(t)for(let e of t)e()}delete eA[e],delete eR[e],delete eI[e]}const eQ=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function eV(e){return e.split(/[\s_]+/).map(e=>!e.match(/\w/)||eQ.has(e)?e.toLowerCase():e.replace(/[)(:,]/g,"").replace(/’/g,"'").toLowerCase()).filter(Boolean)}function eJ(e){return e.filter(Boolean).map(e=>e.toLowerCase()).filter(e=>e.length>=2)}function eK(e,t,n,o){e[t](n).onsuccess=e=>o&&o(e.target.result)}function eZ(e,t,n){eK(e,"get",t,n)}function e0(e,t,n){eK(e,"getAll",t,n)}function e1(e){e.commit&&e.commit()}function e2(e,t){let n=function(e,t){let n=e[0];for(let o=1;o<e.length;o++){let i=e[o];t(n)>t(i)&&(n=i)}return n}(e,e=>e.length),o=[];for(let i of n)e.some(e=>-1===e.findIndex(e=>t(e)===t(i)))||o.push(i);return o}async function e4(e){return!await tt(e,e$,"url")}async function e6(e,t,n){let[o,i]=await Promise.all([eF,"url"].map(t=>tt(e,e$,t)));return o===n&&i===t}async function e3(e,t){return eG(e,eL,eB,(e,n,o)=>{let i;let r=()=>{e.getAll(i&&IDBKeyRange.lowerBound(i,!0),50).onsuccess=e=>{let n=e.target.result;for(let e of n)if(i=e.unicode,t(e))return o(e);if(n.length<50)return o();r()}};r()})}async function e8(e,t,n,o){{let i=function(e){let t=e.map(({annotation:e,emoticon:t,group:n,order:o,shortcodes:i,skins:r,tags:a,emoji:s,version:l})=>{let c=[...new Set(eJ([...(i||[]).map(eV).flat(),...a.map(eV).flat(),...eV(e),t]))].sort(),u={annotation:e,group:n,order:o,tags:a,tokens:c,unicode:s,version:l};if(t&&(u.emoticon=t),i&&(u.shortcodes=i),r)for(let{tone:e,emoji:t,version:n}of(u.skinTones=[],u.skinUnicodes=[],u.skinVersions=[],r))u.skinTones.push(e),u.skinUnicodes.push(t),u.skinVersions.push(n);return u});return t}(t);await eG(e,[eL,e$],eW,([e,t],r)=>{let a,s;let l=0;function c(){2==++l&&function(){if(a!==o||s!==n){for(let t of(e.clear(),i))e.put(t);t.put(o,eF),t.put(n,"url"),e1(r)}}()}eZ(t,eF,e=>{a=e,c()}),eZ(t,"url",e=>{s=e,c()})})}}async function e5(e,t){return eG(e,eL,eB,(e,n,o)=>{let i=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);e0(e.index(eP),i,o)})}async function e7(e,t){let n=eJ(eV(t));return n.length?eG(e,eL,eB,(e,t,o)=>{let i=[],r=()=>{i.length===n.length&&a()},a=()=>{let e=e2(i,e=>e.unicode);o(e.sort((e,t)=>e.order<t.order?-1:1))};for(let t=0;t<n.length;t++){let o=n[t],a=t===n.length-1?IDBKeyRange.bound(o,o+"￿",!1,!0):IDBKeyRange.only(o);e0(e.index(eU),a,e=>{i.push(e),r()})}}):[]}async function e9(e,t){let n=await e7(e,t);return n.length?n.filter(e=>{let n=(e.shortcodes||[]).map(e=>e.toLowerCase());return n.includes(t.toLowerCase())})[0]||null:await e3(e,e=>(e.shortcodes||[]).includes(t.toLowerCase()))||null}async function te(e,t){return eG(e,eL,eB,(e,n,o)=>eZ(e,t,n=>{if(n)return o(n);eZ(e.index(eN),t,e=>o(e||null))}))}function tt(e,t,n){return eG(e,t,eB,(e,t,o)=>eZ(e,n,o))}const tn=["name","url"];function to(e){!function(e){let t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||tn.some(t=>!(t in e[0])));if(!t||n)throw Error("Custom emojis are in the wrong format")}(e);let t=(e,t)=>e.name.toLowerCase()<t.name.toLowerCase()?-1:1,n=e.sort(t),o=function(e,t){let n=new Map;for(let o of e){let e=t(o);for(let t of e){let e=n;for(let n=0;n<t.length;n++){let o=t.charAt(n),i=e.get(o);i||(i=new Map,e.set(o,i)),e=i}let i=e.get("");i||(i=[],e.set("",i)),i.push(o)}}return(e,t)=>{let o=n;for(let t=0;t<e.length;t++){let n=e.charAt(t),i=o.get(n);if(!i)return[];o=i}if(t){let e=o.get("");return e||[]}let i=[],r=[o];for(;r.length;){let e=r.shift(),t=[...e.entries()].sort((e,t)=>e[0]<t[0]?-1:1);for(let[e,n]of t)""===e?i.push(...n):r.push(n)}return i}}(e,e=>[...new Set((e.shortcodes||[]).map(e=>eV(e)).flat())]),i=e=>o(e,!0),r=e=>o(e,!1),a=new Map,s=new Map;for(let t of e)for(let e of(s.set(t.name.toLowerCase(),t),t.shortcodes||[]))a.set(e.toLowerCase(),t);return{all:n,search:e=>{let n=eV(e),o=n.map((e,t)=>(t<n.length-1?i:r)(e));return e2(o,e=>e.name).sort(t)},byShortcode:e=>a.get(e.toLowerCase()),byName:e=>s.get(e.toLowerCase())}}const ti="undefined"!=typeof wrappedJSObject;function tr(e){if(!e)return e;if(ti&&(e=structuredClone(e)),delete e.tokens,e.skinTones){let t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function ta(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const ts=["annotation","emoji","group","order","tags","version"];function tl(e,t){if(2!==Math.floor(e.status/100))throw Error("Failed to fetch: "+t+":  "+e.status)}async function tc(e){let t=await fetch(e,{method:"HEAD"});tl(t,e);let n=t.headers.get("etag");return ta(n),n}async function tu(e){let t=await fetch(e);tl(t,e);let n=t.headers.get("etag");ta(n);let o=await t.json();return!function(e){if(!e||!Array.isArray(e)||!e[0]||"object"!=typeof e[0]||ts.some(t=>!(t in e[0])))throw Error("Emoji data is in the wrong format")}(o),[n,o]}async function td(e){let t=JSON.stringify(e),n=function(e){for(var t=e.length,n=new ArrayBuffer(t),o=new Uint8Array(n),i=-1;++i<t;)o[i]=e.charCodeAt(i);return n}(t),o=await crypto.subtle.digest("SHA-1",n),i=function(e){for(var t="",n=new Uint8Array(e),o=n.byteLength,i=-1;++i<o;)t+=String.fromCharCode(n[i]);return t}(o),r=btoa(i);return r}async function tm(e,t){let n;let o=await tc(t);if(!o){let e=await tu(t);o=e[0],n=e[1],o||(o=await td(n))}if(await e6(e,t,o));else{if(!n){let e=await tu(t);n=e[1]}await e8(e,n,t,o)}}async function tf(e,t){let[n,o]=await tu(t);n||(n=await td(o)),await e8(e,o,t,n)}class th{constructor({dataSource:e="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",locale:t="en",customEmoji:n=[]}={}){this.dataSource=e,this.locale=t,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=to(n),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){var e,t,n;let o;let i=this._db=await (eR[e=this._dbName]||(eR[e]=eH(e)),eR[e]);t=this._dbName,n=this._clear,(o=eI[t])||(o=eI[t]=[]),o.push(n);let r=this.dataSource,a=await e4(i);a?await tf(i,r):this._lazyUpdate=tm(i,r)}async ready(){let e=async()=>(this._ready||(this._ready=this._init()),this._ready);await e(),this._db||await e()}async getEmojiByGroup(e){return eM(e),await this.ready(),eq(await e5(this._db,e)).map(tr)}async getEmojiBySearchQuery(e){eS(e),await this.ready();let t=this._custom.search(e),n=eq(await e7(this._db,e)).map(tr);return[...t,...n]}async getEmojiByShortcode(e){eS(e),await this.ready();let t=this._custom.byShortcode(e);return t||tr(await e9(this._db,e))}async getEmojiByUnicodeOrName(e){eS(e),await this.ready();let t=this._custom.byName(e);return t||tr(await te(this._db,e))}async getPreferredSkinTone(){return await this.ready(),await tt(this._db,e$,eO)||0}async setPreferredSkinTone(e){return eM(e),await this.ready(),eG(this._db,e$,eW,(t,n)=>{t.put(e,eO),e1(n)})}async incrementFavoriteEmojiCount(e){return eS(e),await this.ready(),eG(this._db,e_,eW,(t,n)=>eZ(t,e,o=>{t.put((o||0)+1,e),e1(n)}))}async getTopFavoriteEmoji(e){var t,n;return eM(e),await this.ready(),(await (t=this._db,n=this._custom,0===e?[]:eG(t,[e_,eL],eB,([t,o],i,r)=>{let a=[];t.index(ez).openCursor(void 0,"prev").onsuccess=t=>{let i=t.target.result;if(!i)return r(a);function s(t){if(a.push(t),a.length===e)return r(a);i.continue()}let l=i.primaryKey,c=n.byName(l);if(c)return s(c);eZ(o,l,e=>{if(e)return s(e);i.continue()})}}))).map(tr)}set customEmoji(e){this._custom=to(e)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch(e){}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await eX(this._dbName)}async delete(){var e;await this._shutdown(),await (e=this._dbName,new Promise((t,n)=>{eX(e);let o=indexedDB.deleteDatabase(e);eY(t,n,o)}))}}function tg(){}function tp(e){return e()}function tb(){return Object.create(null)}function tv(e){e.forEach(tp)}function ty(e){return"function"==typeof e}function tw(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function tk(t,n){return e||(e=document.createElement("a")),e.href=n,t===e.href}const tC="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:a;function tD(e,t){e.appendChild(t)}function tE(e,t,n){e.insertBefore(t,n||null)}function tj(e){e.parentNode&&e.parentNode.removeChild(e)}function tx(e){return document.createElement(e)}function tT(e){return document.createTextNode(e)}function tS(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function tM(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function tL(e,t){t=""+t,e.data!==t&&(e.data=t)}function t$(e,t){e.value=null==t?"":t}function t_(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}const tU=[],tz=[];let tP=[];const tF=[],tO=Promise.resolve();let tB=!1;function tW(e){tP.push(e)}const tN=new Set;let tq=0;function tA(){if(0!==tq)return;let e=t;do{try{for(;tq<tU.length;){let e=tU[tq];tq++,t=e,function(e){if(null!==e.fragment){e.update(),tv(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(tW)}}(e.$$)}}catch(e){throw tU.length=0,tq=0,e}for(t=null,tU.length=0,tq=0;tz.length;)tz.pop()();for(let e=0;e<tP.length;e+=1){let t=tP[e];tN.has(t)||(tN.add(t),t())}tP.length=0}while(tU.length)for(;tF.length;)tF.pop()();tB=!1,tN.clear(),t=e}const tR=new Set;function tI(e,t){e.d(1),t.delete(e.key)}function tY(e,t,n,o,i,r,a,s,l,c,u,d){let m=e.length,f=r.length,h=m,g={};for(;h--;)g[e[h].key]=h;let p=[],b=new Map,v=new Map,y=[];for(h=f;h--;){let e=d(i,r,h),s=n(e),l=a.get(s);l?o&&y.push(()=>l.p(e,t)):(l=c(s,e)).c(),b.set(s,p[h]=l),s in g&&v.set(s,Math.abs(h-g[s]))}let w=new Set,k=new Set;function C(e){e&&e.i&&(tR.delete(e),e.i(1)),e.m(s,u),a.set(e.key,e),u=e.first,f--}for(;m&&f;){let t=p[f-1],n=e[m-1],o=t.key,i=n.key;t===n?(u=t.first,m--,f--):b.has(i)?!a.has(o)||w.has(o)?C(t):k.has(i)?m--:v.get(o)>v.get(i)?(k.add(o),C(t)):(w.add(i),m--):(l(n,a),m--)}for(;m--;){let t=e[m];b.has(t.key)||l(t,a)}for(;f;)C(p[f-1]);return tv(y),p}class tH{$destroy(){!function(e,t){let n=e.$$;null!==n.fragment&&(function(e){let t=[],n=[];tP.forEach(o=>-1===e.indexOf(o)?t.push(o):n.push(o)),n.forEach(e=>e()),tP=t}(n.after_update),tv(n.on_destroy),n.fragment&&n.fragment.d(1),n.on_destroy=n.fragment=null,n.ctx=[])}(this,0),this.$destroy=tg}$on(e,t){if(!ty(t))return tg;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&0!==Object.keys(e).length&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const tG=[[-1,"✨","custom"],[0,"\uD83D\uDE00","smileys-emotion"],[1,"\uD83D\uDC4B","people-body"],[3,"\uD83D\uDC31","animals-nature"],[4,"\uD83C\uDF4E","food-drink"],[5,"\uD83C\uDFE0️","travel-places"],[6,"⚽","activities"],[7,"\uD83D\uDCDD","objects"],[8,"⛔️","symbols"],[9,"\uD83C\uDFC1","flags"]].map(([e,t,n])=>({id:e,emoji:t,name:n})),tX=tG.slice(1),tQ=tG[0],tV="function"==typeof requestIdleCallback?requestIdleCallback:setTimeout;function tJ(e){return e.unicode.includes("‍")}const tK={"\uD83E\uDEE8":15,"\uD83E\uDEE0":14,"\uD83E\uDD72":13.1,"\uD83E\uDD7B":12.1,"\uD83E\uDD70":11,"\uD83E\uDD29":5,"\uD83D\uDC71‍♀️":4,"\uD83E\uDD23":3,"\uD83D\uDC41️‍\uD83D\uDDE8️":2,"\uD83D\uDE00":1,"\uD83D\uDE10️":.7,"\uD83D\uDE03":.6},tZ=["\uD83D\uDE0A","\uD83D\uDE12","♥️","\uD83D\uDC4D️","\uD83D\uDE0D","\uD83D\uDE02","\uD83D\uDE2D","☺️","\uD83D\uDE14","\uD83D\uDE29","\uD83D\uDE0F","\uD83D\uDC95","\uD83D\uDE4C","\uD83D\uDE18"],t0='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',t1=(e,t)=>e<t?-1:e>t?1:0,t2=(e,t)=>{let n=document.createElement("canvas");n.width=n.height=1;let o=n.getContext("2d");return o.textBaseline="top",o.font=`100px ${t0}`,o.fillStyle=t,o.scale(.01,.01),o.fillText(e,0,0),o.getImageData(0,0,1,1).data},t4=(e,t)=>{let n=[...e].join(","),o=[...t].join(",");return n===o&&!n.startsWith("0,0,0,")},t6=()=>(n||(n=new Promise(e=>tV(()=>e(function(){let e=Object.entries(tK);try{for(let[t,n]of e)if(function(e){let t=t2(e,"#000"),n=t2(e,"#fff");return t&&n&&t4(t,n)}(t))return n}catch(e){}finally{}return e[0][1]}())))),n),t3=new Map;function t8(e){e.preventDefault(),e.stopPropagation()}function t5(e,t,n){return(t+=e?-1:1)<0?t=n.length-1:t>=n.length&&(t=0),t}function t7(e,t){let n=new Set,o=[];for(let i of e){let e=t(i);n.has(e)||(n.add(e),o.push(i))}return o}const t9=requestAnimationFrame;let ne="function"==typeof ResizeObserver;function nt(e){{let t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}const{Map:nn}=tC;function no(e,t,n){let o=e.slice();return o[64]=t[n],o[66]=n,o}function ni(e,t,n){let o=e.slice();return o[67]=t[n],o[66]=n,o}function nr(e,t,n){let o=e.slice();return o[64]=t[n],o[66]=n,o}function na(e,t,n){let o=e.slice();return o[70]=t[n],o}function ns(e,t,n){let o=e.slice();return o[73]=t[n],o[66]=n,o}function nl(e,t){let n,o,i,r,a,s,l;let c=t[73]+"";return{key:e,first:null,c(){n=tx("div"),o=tT(c),tM(n,"id",i="skintone-"+t[66]),tM(n,"class",r="emoji "+(t[66]===t[20]?"active":"")),tM(n,"aria-selected",a=t[66]===t[20]),tM(n,"role","option"),tM(n,"title",s=t[0].skinTones[t[66]]),tM(n,"aria-label",l=t[0].skinTones[t[66]]),this.first=n},m(e,t){tE(e,n,t),tD(n,o)},p(e,u){t=e,512&u[0]&&c!==(c=t[73]+"")&&tL(o,c),512&u[0]&&i!==(i="skintone-"+t[66])&&tM(n,"id",i),1049088&u[0]&&r!==(r="emoji "+(t[66]===t[20]?"active":""))&&tM(n,"class",r),1049088&u[0]&&a!==(a=t[66]===t[20])&&tM(n,"aria-selected",a),513&u[0]&&s!==(s=t[0].skinTones[t[66]])&&tM(n,"title",s),513&u[0]&&l!==(l=t[0].skinTones[t[66]])&&tM(n,"aria-label",l)},d(e){e&&tj(n)}}}function nc(e,t){let n,o,i,r,a,s,l,c,u;let d=t[70].emoji+"";function m(){return t[50](t[70])}return{key:e,first:null,c(){n=tx("button"),o=tx("div"),i=tT(d),tM(o,"class","nav-emoji emoji"),tM(n,"role","tab"),tM(n,"class","nav-button"),tM(n,"aria-controls",r="tab-"+t[70].id),tM(n,"aria-label",a=t[0].categories[t[70].name]),tM(n,"aria-selected",s=!t[4]&&t[13].id===t[70].id),tM(n,"title",l=t[0].categories[t[70].name]),this.first=n},m(e,t){tE(e,n,t),tD(n,o),tD(o,i),c||(u=tS(n,"click",m),c=!0)},p(e,o){t=e,4096&o[0]&&d!==(d=t[70].emoji+"")&&tL(i,d),4096&o[0]&&r!==(r="tab-"+t[70].id)&&tM(n,"aria-controls",r),4097&o[0]&&a!==(a=t[0].categories[t[70].name])&&tM(n,"aria-label",a),12304&o[0]&&s!==(s=!t[4]&&t[13].id===t[70].id)&&tM(n,"aria-selected",s),4097&o[0]&&l!==(l=t[0].categories[t[70].name])&&tM(n,"title",l)},d(e){e&&tj(n),c=!1,u()}}}function nu(e){let t,n;return{c(){tM(t=tx("img"),"class","custom-emoji"),tk(t.src,n=e[64].url)||tM(t,"src",n),tM(t,"alt",""),tM(t,"loading","lazy")},m(e,n){tE(e,t,n)},p(e,o){32768&o[0]&&!tk(t.src,n=e[64].url)&&tM(t,"src",n)},d(e){e&&tj(t)}}}function nd(e){let t,n=e[27](e[64],e[8])+"";return{c(){t=tT(n)},m(e,n){tE(e,t,n)},p(e,o){33024&o[0]&&n!==(n=e[27](e[64],e[8])+"")&&tL(t,n)},d(e){e&&tj(t)}}}function nm(e,t){let n,o,i,r,a,s,l;function c(e,t){return e[64].unicode?nd:nu}let u=c(t),d=u(t);return{key:e,first:null,c(){n=tx("button"),d.c(),tM(n,"role",o=t[4]?"option":"menuitem"),tM(n,"aria-selected",i=t[4]?t[66]==t[5]:""),tM(n,"aria-label",r=t[28](t[64],t[8])),tM(n,"title",a=t[64].title),tM(n,"class",s="emoji "+(t[4]&&t[66]===t[5]?"active":"")),tM(n,"id",l="emo-"+t[64].id),this.first=n},m(e,t){tE(e,n,t),d.m(n,null)},p(e,m){u===(u=c(t=e))&&d?d.p(t,m):(d.d(1),(d=u(t))&&(d.c(),d.m(n,null))),16&m[0]&&o!==(o=t[4]?"option":"menuitem")&&tM(n,"role",o),32816&m[0]&&i!==(i=t[4]?t[66]==t[5]:"")&&tM(n,"aria-selected",i),33024&m[0]&&r!==(r=t[28](t[64],t[8]))&&tM(n,"aria-label",r),32768&m[0]&&a!==(a=t[64].title)&&tM(n,"title",a),32816&m[0]&&s!==(s="emoji "+(t[4]&&t[66]===t[5]?"active":""))&&tM(n,"class",s),32768&m[0]&&l!==(l="emo-"+t[64].id)&&tM(n,"id",l)},d(e){e&&tj(n),d.d()}}}function nf(e,t){let n,o,i,r,a,s,l,c;let u=(t[4]?t[0].searchResultsLabel:t[67].category?t[67].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",d=[],m=new nn,f=t[67].emojis,h=e=>e[64].id;for(let e=0;e<f.length;e+=1){let n=nr(t,f,e),o=h(n);m.set(o,d[e]=nm(o,n))}return{key:e,first:null,c(){n=tx("div"),o=tT(u),a=tx("div");for(let e=0;e<d.length;e+=1)d[e].c();tM(n,"id",i="menu-label-"+t[66]),tM(n,"class",r="category "+(1===t[15].length&&""===t[15][0].category?"gone":"")),tM(n,"aria-hidden","true"),tM(a,"class","emoji-menu"),tM(a,"role",s=t[4]?"listbox":"menu"),tM(a,"aria-labelledby",l="menu-label-"+t[66]),tM(a,"id",c=t[4]?"search-results":""),this.first=n},m(e,t){tE(e,n,t),tD(n,o),tE(e,a,t);for(let e=0;e<d.length;e+=1)d[e]&&d[e].m(a,null)},p(e,g){t=e,40977&g[0]&&u!==(u=(t[4]?t[0].searchResultsLabel:t[67].category?t[67].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&tL(o,u),32768&g[0]&&i!==(i="menu-label-"+t[66])&&tM(n,"id",i),32768&g[0]&&r!==(r="category "+(1===t[15].length&&""===t[15][0].category?"gone":""))&&tM(n,"class",r),402686256&g[0]&&(f=t[67].emojis,d=tY(d,g,h,1,t,f,m,a,tI,nm,null,nr)),16&g[0]&&s!==(s=t[4]?"listbox":"menu")&&tM(a,"role",s),32768&g[0]&&l!==(l="menu-label-"+t[66])&&tM(a,"aria-labelledby",l),16&g[0]&&c!==(c=t[4]?"search-results":"")&&tM(a,"id",c)},d(e){e&&tj(n),e&&tj(a);for(let e=0;e<d.length;e+=1)d[e].d()}}}function nh(e){let t,n;return{c(){tM(t=tx("img"),"class","custom-emoji"),tk(t.src,n=e[64].url)||tM(t,"src",n),tM(t,"alt",""),tM(t,"loading","lazy")},m(e,n){tE(e,t,n)},p(e,o){1024&o[0]&&!tk(t.src,n=e[64].url)&&tM(t,"src",n)},d(e){e&&tj(t)}}}function ng(e){let t,n=e[27](e[64],e[8])+"";return{c(){t=tT(n)},m(e,n){tE(e,t,n)},p(e,o){1280&o[0]&&n!==(n=e[27](e[64],e[8])+"")&&tL(t,n)},d(e){e&&tj(t)}}}function np(e,t){let n,o,i,r;function a(e,t){return e[64].unicode?ng:nh}let s=a(t),l=s(t);return{key:e,first:null,c(){n=tx("button"),l.c(),tM(n,"role","menuitem"),tM(n,"aria-label",o=t[28](t[64],t[8])),tM(n,"title",i=t[64].title),tM(n,"class","emoji"),tM(n,"id",r="fav-"+t[64].id),this.first=n},m(e,t){tE(e,n,t),l.m(n,null)},p(e,c){s===(s=a(t=e))&&l?l.p(t,c):(l.d(1),(l=s(t))&&(l.c(),l.m(n,null))),1280&c[0]&&o!==(o=t[28](t[64],t[8]))&&tM(n,"aria-label",o),1024&c[0]&&i!==(i=t[64].title)&&tM(n,"title",i),1024&c[0]&&r!==(r="fav-"+t[64].id)&&tM(n,"id",r)},d(e){e&&tj(n),l.d()}}}function nb(e){let t,n,o,i,r,a,s,l,c,u,d,m,f,h,g,p,b,v,y,w,k,C,D,E,j,x,T,S,M,L,$,_,U,z,P,F,O,B,W,N,q,A,R,I;let Y=e[0].searchLabel+"",H=e[0].searchDescription+"",G=e[0].skinToneDescription+"",X=[],Q=new nn,V=[],J=new nn,K=[],Z=new nn,ee=[],et=new nn,en=e[9],eo=e=>e[73];for(let t=0;t<en.length;t+=1){let n=ns(e,en,t),o=eo(n);Q.set(o,X[t]=nl(o,n))}let ei=e[12],er=e=>e[70].id;for(let t=0;t<ei.length;t+=1){let n=na(e,ei,t),o=er(n);J.set(o,V[t]=nc(o,n))}let ea=e[15],es=e=>e[67].category;for(let t=0;t<ea.length;t+=1){let n=ni(e,ea,t),o=es(n);Z.set(o,K[t]=nf(o,n))}let el=e[10],ec=e=>e[64].id;for(let t=0;t<el.length;t+=1){let n=no(e,el,t),o=ec(n);et.set(o,ee[t]=np(o,n))}return{c(){t=tx("section"),n=tx("div"),o=tx("div"),i=tx("div"),r=tx("input"),c=tx("label"),u=tT(Y),d=tx("span"),m=tT(H),f=tx("div"),h=tx("button"),g=tT(e[21]),v=tx("span"),y=tT(G),w=tx("div");for(let e=0;e<X.length;e+=1)X[e].c();j=tx("div");for(let e=0;e<V.length;e+=1)V[e].c();T=tx("div"),S=tx("div"),M=tx("div"),L=tT(e[18]),_=tx("div"),U=tx("div");for(let e=0;e<K.length;e+=1)K[e].c();B=tx("div");for(let e=0;e<ee.length;e+=1)ee[e].c();(q=tx("button")).textContent="\uD83D\uDE00",tM(n,"class","pad-top"),tM(r,"id","search"),tM(r,"class","search"),tM(r,"type","search"),tM(r,"role","combobox"),tM(r,"enterkeyhint","search"),tM(r,"placeholder",a=e[0].searchLabel),tM(r,"autocapitalize","none"),tM(r,"autocomplete","off"),tM(r,"spellcheck","true"),tM(r,"aria-expanded",s=!!(e[4]&&e[1].length)),tM(r,"aria-controls","search-results"),tM(r,"aria-describedby","search-description"),tM(r,"aria-autocomplete","list"),tM(r,"aria-activedescendant",l=e[26]?`emo-${e[26]}`:""),tM(c,"class","sr-only"),tM(c,"for","search"),tM(d,"id","search-description"),tM(d,"class","sr-only"),tM(i,"class","search-wrapper"),tM(h,"id","skintone-button"),tM(h,"class",p="emoji "+(e[6]?"hide-focus":"")),tM(h,"aria-label",e[23]),tM(h,"title",e[23]),tM(h,"aria-describedby","skintone-description"),tM(h,"aria-haspopup","listbox"),tM(h,"aria-expanded",e[6]),tM(h,"aria-controls","skintone-list"),tM(f,"class",b="skintone-button-wrapper "+(e[19]?"expanded":"")),tM(v,"id","skintone-description"),tM(v,"class","sr-only"),tM(w,"id","skintone-list"),tM(w,"class",k="skintone-list hide-focus "+(e[6]?"":"hidden no-animate")),t_(w,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),tM(w,"role","listbox"),tM(w,"aria-label",C=e[0].skinTonesLabel),tM(w,"aria-activedescendant",D="skintone-"+e[20]),tM(w,"aria-hidden",E=!e[6]),tM(w,"tabindex","-1"),tM(o,"class","search-row"),tM(j,"class","nav"),tM(j,"role","tablist"),t_(j,"grid-template-columns","repeat("+e[12].length+", 1fr)"),tM(j,"aria-label",x=e[0].categoriesLabel),tM(S,"class","indicator"),t_(S,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),tM(T,"class","indicator-wrapper"),tM(M,"class",$="message "+(e[18]?"":"gone")),tM(M,"role","alert"),tM(M,"aria-live","polite"),tM(_,"class",z="tabpanel "+(!e[14]||e[18]?"gone":"")),tM(_,"role",P=e[4]?"region":"tabpanel"),tM(_,"aria-label",F=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),tM(_,"id",O=e[4]?"":`tab-${e[13].id}`),tM(_,"tabindex","0"),tM(B,"class",W="favorites emoji-menu "+(e[18]?"gone":"")),tM(B,"role","menu"),tM(B,"aria-label",N=e[0].favoritesLabel),t_(B,"padding-inline-end",e[25]+"px"),tM(q,"aria-hidden","true"),tM(q,"tabindex","-1"),tM(q,"class","abs-pos hidden emoji"),tM(t,"class","picker"),tM(t,"aria-label",A=e[0].regionLabel),tM(t,"style",e[22])},m(a,s){tE(a,t,s),tD(t,n),tD(t,o),tD(o,i),tD(i,r),t$(r,e[2]),tD(i,c),tD(c,u),tD(i,d),tD(d,m),tD(o,f),tD(f,h),tD(h,g),tD(o,v),tD(v,y),tD(o,w);for(let e=0;e<X.length;e+=1)X[e]&&X[e].m(w,null);e[49](w),tD(t,j);for(let e=0;e<V.length;e+=1)V[e]&&V[e].m(j,null);tD(t,T),tD(T,S),tD(t,M),tD(M,L),tD(t,_),tD(_,U);for(let e=0;e<K.length;e+=1)K[e]&&K[e].m(U,null);e[51](_),tD(t,B);for(let e=0;e<ee.length;e+=1)ee[e]&&ee[e].m(B,null);if(tD(t,q),e[52](q),e[53](t),!R){var l;I=[tS(r,"input",e[48]),tS(r,"keydown",e[30]),tS(h,"click",e[35]),tS(w,"focusout",e[38]),tS(w,"click",e[34]),tS(w,"keydown",e[36]),tS(w,"keyup",e[37]),tS(j,"keydown",e[32]),(l=e[29].call(null,U))&&ty(l.destroy)?l.destroy:tg,tS(_,"click",e[33]),tS(B,"click",e[33])],R=!0}},p(e,n){1&n[0]&&a!==(a=e[0].searchLabel)&&tM(r,"placeholder",a),18&n[0]&&s!==(s=!!(e[4]&&e[1].length))&&tM(r,"aria-expanded",s),67108864&n[0]&&l!==(l=e[26]?`emo-${e[26]}`:"")&&tM(r,"aria-activedescendant",l),4&n[0]&&r.value!==e[2]&&t$(r,e[2]),1&n[0]&&Y!==(Y=e[0].searchLabel+"")&&tL(u,Y),1&n[0]&&H!==(H=e[0].searchDescription+"")&&tL(m,H),2097152&n[0]&&tL(g,e[21]),64&n[0]&&p!==(p="emoji "+(e[6]?"hide-focus":""))&&tM(h,"class",p),8388608&n[0]&&tM(h,"aria-label",e[23]),8388608&n[0]&&tM(h,"title",e[23]),64&n[0]&&tM(h,"aria-expanded",e[6]),524288&n[0]&&b!==(b="skintone-button-wrapper "+(e[19]?"expanded":""))&&tM(f,"class",b),1&n[0]&&G!==(G=e[0].skinToneDescription+"")&&tL(y,G),1049089&n[0]&&(en=e[9],X=tY(X,n,eo,1,e,en,Q,w,tI,nl,null,ns)),64&n[0]&&k!==(k="skintone-list hide-focus "+(e[6]?"":"hidden no-animate"))&&tM(w,"class",k),64&n[0]&&t_(w,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),1&n[0]&&C!==(C=e[0].skinTonesLabel)&&tM(w,"aria-label",C),1048576&n[0]&&D!==(D="skintone-"+e[20])&&tM(w,"aria-activedescendant",D),64&n[0]&&E!==(E=!e[6])&&tM(w,"aria-hidden",E),12305&n[0]|1&n[1]&&(ei=e[12],V=tY(V,n,er,1,e,ei,J,j,tI,nc,null,na)),4096&n[0]&&t_(j,"grid-template-columns","repeat("+e[12].length+", 1fr)"),1&n[0]&&x!==(x=e[0].categoriesLabel)&&tM(j,"aria-label",x),16779264&n[0]&&t_(S,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),262144&n[0]&&tL(L,e[18]),262144&n[0]&&$!==($="message "+(e[18]?"":"gone"))&&tM(M,"class",$),402694449&n[0]&&(ea=e[15],K=tY(K,n,es,1,e,ea,Z,U,tI,nf,null,ni)),278528&n[0]&&z!==(z="tabpanel "+(!e[14]||e[18]?"gone":""))&&tM(_,"class",z),16&n[0]&&P!==(P=e[4]?"region":"tabpanel")&&tM(_,"role",P),8209&n[0]&&F!==(F=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name])&&tM(_,"aria-label",F),8208&n[0]&&O!==(O=e[4]?"":`tab-${e[13].id}`)&&tM(_,"id",O),402654464&n[0]&&(el=e[10],ee=tY(ee,n,ec,1,e,el,et,B,tI,np,null,no)),262144&n[0]&&W!==(W="favorites emoji-menu "+(e[18]?"gone":""))&&tM(B,"class",W),1&n[0]&&N!==(N=e[0].favoritesLabel)&&tM(B,"aria-label",N),33554432&n[0]&&t_(B,"padding-inline-end",e[25]+"px"),1&n[0]&&A!==(A=e[0].regionLabel)&&tM(t,"aria-label",A),4194304&n[0]&&tM(t,"style",e[22])},i:tg,o:tg,d(n){n&&tj(t);for(let e=0;e<X.length;e+=1)X[e].d();e[49](null);for(let e=0;e<V.length;e+=1)V[e].d();for(let e=0;e<K.length;e+=1)K[e].d();e[51](null);for(let e=0;e<ee.length;e+=1)ee[e].d();e[52](null),e[53](null),R=!1,tv(I)}}}function nv(e,n,i){let r,a,s,l,c,u,d,m,f,h,{skinToneEmoji:g}=n,{i18n:p}=n,{database:b}=n,{customEmoji:v}=n,{customCategorySorting:y}=n,{emojiVersion:w}=n,k=[],C=[],D="",E="",j=!1,x=-1,T=!1,S=!1,M=0,L=0,$="",_=[],U=[],z=8,P=!1,F=0,O=0,B=tX,W=!1,N=e=>{r.getRootNode().getElementById(e).focus()},q=(e,t)=>{r.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))},A=(e,t)=>t&&e.skins&&e.skins[t]||e.unicode;function R(e){return!e.unicode||!tJ(e)||t3.get(e.unicode)}async function I(e){let t=w||await t6();return e.filter(({version:e})=>!e||e<=t)}async function Y(e){return function(e,t){let n=e=>{let n={};for(let o of e)"number"==typeof o.tone&&o.version<=t&&(n[o.tone]=o.unicode);return n};return e.map(({unicode:e,skins:t,shortcodes:o,url:i,name:r,category:a})=>({unicode:e,name:r,shortcodes:o,url:i,category:a,id:e||r,skins:t&&n(t),title:(o||[]).join(", ")}))}(e,w||await t6())}async function H(e){let t=-1===e?v:await b.getEmojiByGroup(e);return Y(await I(t))}async function G(e){return Y(await I(await b.getEmojiBySearchQuery(e)))}function X(e){i(2,D=""),i(45,E=""),i(5,x=-1),i(11,O=B.findIndex(t=>t.id===e.id))}async function Q(e){let t=await b.getEmojiByUnicodeOrName(e),n=[...k,...U].find(t=>t.id===e),o=n.unicode&&A(n,M);await b.incrementFavoriteEmojiCount(e),q("emoji-click",{emoji:t,skinTone:M,...o&&{unicode:o},...n.name&&{name:n.name}})}async function V(e){let{target:t}=e;if(!t.classList.contains("emoji"))return;t8(e);let n=t.id.substring(4);Q(n)}function J(e){i(8,M=e),i(6,T=!1),N("skintone-button"),q("skin-tone-change",{skinTone:e}),b.setPreferredSkinTone(e)}async function K(e){let{relatedTarget:t}=e;t&&"skintone-list"===t.id||i(6,T=!1)}return(function(){if(!t)throw Error("Function called outside component initialization");return t})().$$.on_mount.push(()=>{w||t6().then(e=>{e||i(18,l=p.emojiUnsupportedMessage)})}),e.$$set=e=>{"skinToneEmoji"in e&&i(40,g=e.skinToneEmoji),"i18n"in e&&i(0,p=e.i18n),"database"in e&&i(39,b=e.database),"customEmoji"in e&&i(41,v=e.customEmoji),"customCategorySorting"in e&&i(42,y=e.customCategorySorting),"emojiVersion"in e&&i(43,w=e.emojiVersion)},e.$$.update=()=>{if(1280&e.$$.dirty[1]&&v&&b&&i(39,b.customEmoji=v,b),1&e.$$.dirty[0]|256&e.$$.dirty[1]){async function t(){let e=!1,t=setTimeout(()=>{e=!0,i(18,l=p.loadingMessage)},1e3);try{await b.ready(),i(14,W=!0)}catch(e){console.error(e),i(18,l=p.networkErrorMessage)}finally{clearTimeout(t),e&&(e=!1,i(18,l=""))}}b&&t()}if(6144&e.$$.dirty[0]|1024&e.$$.dirty[1]&&(v&&v.length?i(12,B=[tQ,...tX]):B!==tX&&(O&&i(11,O--,O),i(12,B=tX))),4&e.$$.dirty[0]&&tV(()=>{i(45,E=(D||"").trim()),i(5,x=-1)}),6144&e.$$.dirty[0]&&i(13,f=B[O]),24576&e.$$.dirty[0]|16384&e.$$.dirty[1]&&async function(){if(W){if(E.length>=2){let e=E,t=await G(e);e===E&&(i(1,k=t),i(4,j=!0))}else if(f){let e=f.id,t=await H(e);e===f.id&&(i(1,k=t),i(4,j=!1))}}else i(1,k=[]),i(4,j=!1)}(),4112&e.$$.dirty[0]&&i(22,d=`
  --num-groups: ${B.length}; 
  --indicator-opacity: ${j?0:1}; 
  --num-skintones: 6;`),16384&e.$$.dirty[0]|256&e.$$.dirty[1]&&async function(){W&&i(8,M=await b.getPreferredSkinTone())}(),512&e.$$.dirty[1]&&i(9,_=Array(6).fill().map((e,t)=>(function(e,t){if(0===t)return e;let n=e.indexOf("‍");return -1!==n?e.substring(0,n)+String.fromCodePoint(127995+t-1)+e.substring(n):(e.endsWith("️")&&(e=e.substring(0,e.length-1)),e+"\ud83c"+String.fromCodePoint(57339+t-1))})(g,t))),768&e.$$.dirty[0]&&i(21,u=_[M]),257&e.$$.dirty[0]&&i(23,$=p.skinToneLabel.replace("{skinTone}",p.skinTones[M])),16384&e.$$.dirty[0]|256&e.$$.dirty[1]){async function n(){i(46,m=(await Promise.all(tZ.map(e=>b.getEmojiByUnicodeOrName(e)))).filter(Boolean))}W&&n()}if(16384&e.$$.dirty[0]|98560&e.$$.dirty[1]){async function L(){let e=await b.getTopFavoriteEmoji(z),t=await Y(t7([...e,...m],e=>e.unicode||e.name).slice(0,z));i(10,U=t)}W&&m&&L()}if(10&e.$$.dirty[0]|4096&e.$$.dirty[1]){let e=k.filter(e=>e.unicode).filter(e=>tJ(e)&&!t3.has(e.unicode));!w&&e.length?t9(()=>(function(e){let t=r.getRootNode();(function(e,t,n){for(let i of e){let e=n(i),r=nt(e);void 0===o&&(o=nt(t));let a=r/1.8<o;t3.set(i.unicode,a)}})(e,a,e=>t.getElementById(`emo-${e.id}`)),i(1,k)})(e)):(i(1,k=w?k:k.filter(R)),t9(()=>{var e;(e=s)&&(e.scrollTop=0)}))}e.$$.dirty[0],e.$$.dirty[1],18&e.$$.dirty[0]|2048&e.$$.dirty[1]&&i(15,C=function(){if(j)return[{category:"",emojis:k}];let e=new Map;for(let t of k){let n=t.category||"",o=e.get(n);o||(o=[],e.set(n,o)),o.push(t)}return[...e.entries()].map(([e,t])=>({category:e,emojis:t})).sort((e,t)=>y(e.category,t.category))}()),34&e.$$.dirty[0]&&i(26,h=-1!==x&&k[x].id),192&e.$$.dirty[0]&&(T?c.addEventListener("transitionend",()=>{i(19,S=!0)},{once:!0}):i(19,S=!1))},[p,k,D,s,j,x,T,c,M,_,U,O,B,f,W,C,r,a,l,S,L,u,d,$,P,F,h,A,(e,t)=>t7([e.name||A(e,t),...e.shortcodes||[]],e=>e).join(", "),function(e){var t;let n;return t=t=>{{let n=getComputedStyle(r),o=parseInt(n.getPropertyValue("--num-columns"),10),a="rtl"===n.getPropertyValue("direction"),s=e.parentElement.getBoundingClientRect().width;i(47,z=o),i(25,F=s-t),i(24,P=a)}},ne?(n=new ResizeObserver(e=>t(e[0].contentRect.width))).observe(e):t9(()=>t(e.getBoundingClientRect().width)),{destroy(){n&&n.disconnect()}}},function(e){if(!j||!k.length)return;let t=t=>{t8(e),i(5,x=t5(t,x,k))};switch(e.key){case"ArrowDown":return t(!1);case"ArrowUp":return t(!0);case"Enter":if(-1!==x)return t8(e),Q(k[x].id);k.length&&i(5,x=0)}},X,function(e){let{target:t,key:n}=e,o=t=>{t&&(t8(e),t.focus())};switch(n){case"ArrowLeft":return o(t.previousSibling);case"ArrowRight":return o(t.nextSibling);case"Home":return o(t.parentElement.firstChild);case"End":return o(t.parentElement.lastChild)}},V,function(e){let{target:{id:t}}=e,n=t&&t.match(/^skintone-(\d)/);if(!n)return;t8(e);let o=parseInt(n[1],10);J(o)},function(e){i(6,T=!T),i(20,L=M),T&&(t8(e),t9(()=>N("skintone-list")))},function(e){if(!T)return;let t=async t=>{t8(e),i(20,L=t)};switch(e.key){case"ArrowUp":return t(t5(!0,L,_));case"ArrowDown":return t(t5(!1,L,_));case"Home":return t(0);case"End":return t(_.length-1);case"Enter":return t8(e),J(L);case"Escape":return t8(e),i(6,T=!1),N("skintone-button")}},function(e){if(T&&" "===e.key)return t8(e),J(L)},K,b,g,v,y,w,!0,E,m,z,function(){i(2,D=this.value)},function(e){tz[e?"unshift":"push"](()=>{i(7,c=e)})},e=>X(e),function(e){tz[e?"unshift":"push"](()=>{i(3,s=e)})},function(e){tz[e?"unshift":"push"](()=>{i(17,a=e)})},function(e){tz[e?"unshift":"push"](()=>{i(16,r=e)})}]}class ny extends tH{constructor(e){super(),function(e,n,o,i,r,a,s,l=[-1]){let c=t;t=e;let u=e.$$={fragment:null,ctx:[],props:a,update:tg,not_equal:r,bound:tb(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:tb(),dirty:l,skip_bound:!1,root:n.target||c.$$.root};s&&s(u.root);let d=!1;u.ctx=o?o(e,n.props||{},(t,n,...o)=>{let i=o.length?o[0]:n;return u.ctx&&r(u.ctx[t],u.ctx[t]=i)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](i),d)&&(-1===e.$$.dirty[0]&&(tU.push(e),tB||(tB=!0,tO.then(tA)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31),n}):[],u.update(),d=!0,tv(u.before_update),u.fragment=!!i&&i(u.ctx),n.target&&(u.fragment&&u.fragment.c(),function(e,t,n,o){let{fragment:i,after_update:r}=e.$$;i&&i.m(t,n),o||tW(()=>{let t=e.$$.on_mount.map(tp).filter(ty);e.$$.on_destroy?e.$$.on_destroy.push(...t):tv(t),e.$$.on_mount=[]}),r.forEach(tW)}(e,n.target,void 0,void 0),tA()),t=c}(this,e,nv,nb,tw,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42,emojiVersion:43},null,[-1,-1,-1])}}var nw={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading…",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const nk=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji","emojiVersion"],nC=`:host{--emoji-font-family:${t0}}`;class nD extends HTMLElement{constructor(e){super(),this.attachShadow({mode:"open"});let t=document.createElement("style");for(let n of(t.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}"+nC,this.shadowRoot.appendChild(t),this._ctx={locale:"en",dataSource:"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",skinToneEmoji:"\uD83D\uDD90️",customCategorySorting:t1,customEmoji:null,i18n:nw,emojiVersion:null,...e},nk))"database"!==n&&Object.prototype.hasOwnProperty.call(this,n)&&(this._ctx[n]=this[n],delete this[n]);this._dbFlush()}connectedCallback(){this._cmp||(this._cmp=new ny({target:this.shadowRoot,props:this._ctx}))}disconnectedCallback(){Promise.resolve().then(()=>{if(!this.isConnected&&this._cmp){this._cmp.$destroy(),this._cmp=void 0;let{database:e}=this._ctx;e.close().catch(e=>console.error(e))}})}static get observedAttributes(){return["locale","data-source","skin-tone-emoji","emoji-version"]}attributeChangedCallback(e,t,n){this._set(e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase()),"emoji-version"===e?parseFloat(n):n)}_set(e,t){this._ctx[e]=t,this._cmp&&this._cmp.$set({[e]:t}),["locale","dataSource"].includes(e)&&this._dbFlush()}_dbCreate(){let{locale:e,dataSource:t,database:n}=this._ctx;n&&n.locale===e&&n.dataSource===t||this._set("database",new th({locale:e,dataSource:t}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const nE={};for(const e of nk)nE[e]={get(){return"database"===e&&this._dbCreate(),this._ctx[e]},set(t){if("database"===e)throw Error("database is read-only");this._set(e,t)}};Object.defineProperties(nD.prototype,nE),customElements.get("emoji-picker")||customElements.define("emoji-picker",nD);const nj=localStorage;function nx(e){let t=JSON.parse(nj[e]);return t}function nT(e){nj.removeItem(e)}let nS=0;function nM(e,t){for(let n=0;n<t;n++){if(nS>=e.length){p.dialogWindow.removeEventListener("scroll",nL),nS=0;return}el(e[nS],"prepend"),nS++}}function nL(){let e=p.dialogWindow.scrollHeight;if(0===p.dialogWindow.scrollTop){nM(nx("messages"),20);let t=p.dialogWindow.scrollHeight;p.dialogWindow.scrollTop=t-e}}function n$(){x("token")?(ex(),nS=0,nN(),b.modal.addEventListener("click",eE),eT(v.settings.title,v.settings.inputTitle,v.settings.placeholder),em(b.btnGiveCode,"hide"),em(b.btnEnterCode,"hide"),em(b.btnSingIn,"hide"),em(b.btnRename,"show"),b.enterFieldModal.addEventListener("input",nB),b.btnRename.addEventListener("click",nO),p.dialogWindow.addEventListener("scroll",nL),eu(x("nickname"))):(T("nickname"),T("email"),nT("messages"),eT(v.authorization.title,v.authorization.inputTitle,v.authorization.placeholder),ej(),b.modal.removeEventListener("click",eE),b.enterFieldModal.removeEventListener("input",nB),b.btnRename.removeEventListener("click",nO),p.dialogWindow.removeEventListener("scroll",nL),b.btnEnterCode.addEventListener("click",n_),em(b.btnRename,"hide"))}function n_(){eh(b.enterFieldModal),b.enterFieldModal.removeEventListener("input",nz),ev(),eT(v.confirmation.title,v.confirmation.inputTitle,v.confirmation.placeholder),em(b.btnGiveCode,"hide"),em(b.btnEnterCode,"hide"),em(b.btnSingIn,"show"),em(b.btnBack,"show"),b.enterFieldModal.addEventListener("input",nF),b.btnBack.addEventListener("click",nq)}function nU(){ep(b.enterFieldModal)||eD(ek.urlToken,eC.post,null,{email:eg(b.enterFieldModal)}).then(e=>{"true"===e.status?(eh(b.enterFieldModal),ef(b.btnGiveCode,"disabled"),ev("Авторизация","ok")):"false"===e.status&&(ef(b.btnGiveCode,"disabled"),ev("Авторизация","error"))}).catch(e=>{console.log(`Error: ${e.message}`),ev("Авторизация","error")})}function nz(){let e=eg(b.enterFieldModal);/\S+@\S+\.\S+/.test(e)&&!ey(eg(b.enterFieldModal))?ef(b.btnGiveCode,"active"):ef(b.btnGiveCode,"disabled")}function nP(){eD(ek.urlDataProfile,eC.get,!0).then(e=>{if("true"===e.status)console.log(e),eh(b.enterFieldModal),ef(b.btnSingIn,"disabled"),em(b.btnBack,"hide"),b.enterFieldModal.removeEventListener("input",nF),j("nickname",e.answer.name),j("email",e.answer.email),eu(x("nickname")),n$(),b.btnEnterCode.removeEventListener("click",n_),b.btnGiveCode.removeEventListener("click",nU),ev();else if("false"===e.status){console.log(e),T("token"),n$(),ev();return}}).catch(e=>{ev(v.confirmation.title,"error"),console.log(`Error!!!!: ${e.message}`)})}function nF(){ep(b.enterFieldModal)||ey(eg(b.enterFieldModal))?ef(b.btnSingIn,"disabled"):ef(b.btnSingIn,"active")}function nO(){ep(b.enterFieldModal)||eD(ek.urlToken,eC.patch,!0,{name:eg(b.enterFieldModal)}).then(e=>{j("nickname",e.answer.name),eu(x("nickname")),b.notificationName.textContent=x("nickname"),i.close(1e3,"работа закончена"),nN(),eh(b.enterFieldModal),eb(b.enterFieldModal,b.btnRename,y.srcBtnRenameActive,y.srcBtnRenameDisabled),ev("Настройки","ok"),setTimeout(()=>{ev()},2e3)}).catch(e=>{console.log(e),ev("Настройки","error")})}function nB(){eb(b.enterFieldModal,b.btnRename,y.srcBtnRenameActive,y.srcBtnRenameDisabled)}function nW(e){e.preventDefault(),ep(p.enterFieldChat)||(i.send(JSON.stringify({text:function(){let e=new FormData(p.form);return e.get("message")}()})),eh(p.enterFieldChat),eb(p.enterFieldChat,p.btnSend,y.srcBtnActive,y.srcBtnDisabled))}function nN(){(i=new WebSocket(`wss://edu.strada.one/websockets?${x("token")}`)).onopen=function(e){0===i.readyState?(ec("none"),alert("соединение не установлено!")):1===i.readyState&&(console.log("[open] Соединение установлено"),eD(ek.urlHistoryMessages,eC.get,!0).then(e=>e.answer.messages).then(e=>{nj.setItem("messages",JSON.stringify(e)),nM(nx("messages"),20),ed()}))},i.onmessage=function(e){let t=JSON.parse(e.data);el(t,"append"),ed()},i.onclose=function(e){e.wasClean?(console.log(`[close] Соединение закрыто чисто, код=${e.code} причина=${e.reason}`),nT("messages")):(ec("flex"),console.log("[close] Соединение прервано"),nT("messages"),nN())},i.onerror=function(e){console.log(e)}}function nq(){ef(b.btnGiveCode,"disabled"),ef(b.btnSingIn,"disabled"),em(b.btnBack,"hide"),em(b.btnSingIn,"hide"),em(b.btnGiveCode,"show"),em(b.btnEnterCode,"show"),eT(v.authorization.title,v.authorization.inputTitle,v.authorization.placeholder),b.enterFieldModal.addEventListener("input",nz),b.btnBack.removeEventListener("click",nq),b.enterFieldModal.removeEventListener("input",nF),eh(b.enterFieldModal),ev()}function nA(e){let t=e.target;t===p.btnEmoji?p.emojiContainer.classList.toggle(w.showEmoji):t!==p.btnEmoji&&p.emojiContainer.classList.remove(w.showEmoji)}nP(),b.btnGiveCode.addEventListener("click",nU),b.enterFieldModal.addEventListener("input",nz),b.btnSingIn.addEventListener("click",()=>{ep(b.enterFieldModal)||(j("token",`${eg(b.enterFieldModal)}`),nP())}),p.btnSignOut.addEventListener("click",function(){i.close(1e3,"работа закончена"),p.dialogWindow.removeEventListener("scroll",nL),T("token"),T("nickname"),T("email"),nT("messages"),function(){let e=p.dialogWindow.querySelectorAll(".chat-dialog__message");e.forEach(e=>e.remove())}(),n$(),eT(v.authorization.title,v.authorization.inputTitle,v.authorization.placeholder),em(b.btnGiveCode,"show"),em(b.btnEnterCode,"show"),em(b.btnSingIn,"hide"),b.enterFieldModal.addEventListener("input",nz),b.btnGiveCode.addEventListener("click",nU)}),p.btnSettings.addEventListener("click",ej),p.enterFieldChat.addEventListener("input",()=>{eb(p.enterFieldChat,p.btnSend,y.srcBtnActive,y.srcBtnDisabled),C.value=eg(p.enterFieldChat)}),p.form.addEventListener("submit",nW),document.addEventListener("keydown",e=>{"Enter"!==e.code||e.ctrlKey||e.shiftKey||nW(e)}),p.emoji.addEventListener("emoji-click",e=>{p.enterFieldChat.textContent+=e.detail.unicode,eb(p.enterFieldChat,p.btnSend,y.srcBtnActive,y.srcBtnDisabled);let t=document.createRange(),n=window.getSelection();t.selectNodeContents(p.enterFieldChat),t.collapse(!1),n.removeAllRanges(),n.addRange(t),C.value=eg(p.enterFieldChat)}),p.dialogWindow.addEventListener("scroll",nL),window.addEventListener("resize",function(){let e=window.innerWidth;e<768?(p.chat.removeEventListener("click",nA),p.chat.addEventListener("click",nA)):e>=768&&(p.chat.removeEventListener("click",nA),p.emojiContainer.classList.remove(w.showEmoji))});
//# sourceMappingURL=index.da8e334a.js.map
